# Bitcoin Core configuration for ANCHOR
# This config supports multiple networks via command line flag

# ===========================================
# COMMON SETTINGS (all networks)
# ===========================================

# RPC configuration (user/password only - network-specific settings below)
rpcuser=anchor
rpcpassword=anchor

# Server mode
server=1
daemon=0

# Listen for connections
listen=1

# Transaction settings
txindex=1

# OP_RETURN settings - Bitcoin Core v30+ supports up to 100KB
# This enables larger pixel batches and other protocol data
datacarriersize=100000

# Logging
debug=rpc
printtoconsole=1

# ===========================================
# REGTEST SETTINGS
# ===========================================
[regtest]
rpcport=18443
port=18444
rpcbind=0.0.0.0
rpcallowip=0.0.0.0/0

# ZMQ Configuration (for Bitfeed and other real-time services)
zmqpubrawblock=tcp://0.0.0.0:29000
zmqpubrawtx=tcp://0.0.0.0:29001
zmqpubsequence=tcp://0.0.0.0:29002

# Accept non-standard transactions (for Taproot Annex, etc.)
acceptnonstdtxn=1

# Wallet settings
fallbackfee=0.00001
# Auto-load wallet on startup (wallet will be created by anchor-wallet service if not exists)
wallet=anchor_wallet

# ===========================================
# SIGNET SETTINGS
# ===========================================
[signet]
rpcport=38332
port=38333

# Default signet (Bitcoin Core's default signet)
# signetchallenge can be customized for custom signets

# ===========================================
# TESTNET SETTINGS
# ===========================================
[test]
rpcport=18332
port=18333

# ===========================================
# MAINNET SETTINGS
# ===========================================
[main]
rpcport=8332
port=8333

# Be more conservative on mainnet
# maxmempool=300
# mempoolexpiry=336

# ===========================================
# TOR SETTINGS (optional - enable when Tor container is running)
# ===========================================
# To enable Tor, uncomment the settings below.
# The Tor container must be running for these to work.

# Use Tor as SOCKS5 proxy for outgoing connections
# proxy=networking-tor:9050

# Listen for incoming connections via Tor hidden service
# listenonion=1

# Only use Tor for connections (maximum privacy, slower sync)
# onlynet=onion

# Hybrid mode: use both Tor and clearnet (better performance, less privacy)
# onlynet=onion
# onlynet=ipv4

# Tor control settings (for automatic onion service announcement)
# torcontrol=networking-tor:9051
# torpassword=anchor

# Disable DNS seeds when using Tor-only mode
# dnsseed=0
# dns=0
