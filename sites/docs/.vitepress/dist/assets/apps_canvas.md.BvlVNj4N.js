import{_ as t,c as s,o as e,ag as n}from"./chunks/framework.dvv-DFtf.js";const k=JSON.parse('{"title":"Anchor Canvas","description":"","frontmatter":{},"headers":[],"relativePath":"apps/canvas.md","filePath":"apps/canvas.md"}'),i={name:"apps/canvas.md"};function d(r,a,l,o,p,h){return e(),s("div",null,[...a[0]||(a[0]=[n(`<h1 id="anchor-canvas" tabindex="-1">Anchor Canvas <a class="header-anchor" href="#anchor-canvas" aria-label="Permalink to &quot;Anchor Canvas&quot;">​</a></h1><p>A collaborative pixel canvas on Bitcoin using the Anchor protocol. Similar to Reddit Place, but permanent and decentralized on the Bitcoin blockchain.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Anchor Canvas allows users to paint pixels on a shared canvas by creating Bitcoin transactions. Each pixel is permanently recorded on the blockchain, creating a collaborative artwork that lives forever.</p><table tabindex="0"><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td><strong>Canvas Size</strong></td><td>4580 x 4580 (~21 million pixels)</td></tr><tr><td><strong>Protocol Kind</strong></td><td><a href="/kinds/state.html">State (Kind 2)</a></td></tr><tr><td><strong>Carriers</strong></td><td>OP_RETURN, Witness Data, Inscription</td></tr></tbody></table><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">​</a></h2><ul><li><strong>Paint Tool</strong> - Select and paint individual pixels with any color</li><li><strong>Brush Tool</strong> - Adjustable brush size (1-21 pixels)</li><li><strong>Image Import</strong> - Upload and convert images to pixels</li><li><strong>Smart Carrier Selection</strong> - Auto-selects best carrier based on pixel count</li><li><strong>Pending Pixels</strong> - Visual feedback while waiting for confirmation</li><li><strong>Pixel History</strong> - View the history of changes for any pixel</li></ul><h2 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick Start&quot;">​</a></h2><h3 id="run-with-docker-compose" tabindex="-1">Run with Docker Compose <a class="header-anchor" href="#run-with-docker-compose" aria-label="Permalink to &quot;Run with Docker Compose&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># From the anchor root directory</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --profile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app-canvas</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># View logs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app-canvas-backend</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app-canvas-frontend</span></span></code></pre></div><table tabindex="0"><thead><tr><th>Service</th><th>Port</th><th>Description</th></tr></thead><tbody><tr><td>Canvas Frontend</td><td>3200</td><td>Web interface</td></tr><tr><td>Canvas Backend</td><td>3201</td><td>REST API &amp; Indexer</td></tr></tbody></table><p><strong>Access Anchor Canvas:</strong> <code>http://localhost:3200</code></p><h2 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────┐     ┌─────────────────────┐     ┌─────────────┐</span></span>
<span class="line"><span>│  Frontend (Next.js) │────▶│  Backend (Rust)     │────▶│  PostgreSQL │</span></span>
<span class="line"><span>│     Port 3200       │     │     Port 3201       │     │             │</span></span>
<span class="line"><span>└─────────────────────┘     └──────────┬──────────┘     └─────────────┘</span></span>
<span class="line"><span>                                       │</span></span>
<span class="line"><span>                                       ▼</span></span>
<span class="line"><span>                            ┌─────────────────────┐</span></span>
<span class="line"><span>                            │    Bitcoin Core     │</span></span>
<span class="line"><span>                            │      (Indexer)      │</span></span>
<span class="line"><span>                            └─────────────────────┘</span></span></code></pre></div><h2 id="api-endpoints" tabindex="-1">API Endpoints <a class="header-anchor" href="#api-endpoints" aria-label="Permalink to &quot;API Endpoints&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Endpoint</th><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>/health</code></td><td>GET</td><td>Health check</td></tr><tr><td><code>/stats</code></td><td>GET</td><td>Canvas statistics</td></tr><tr><td><code>/canvas</code></td><td>GET</td><td>Full canvas binary data</td></tr><tr><td><code>/canvas/preview</code></td><td>GET</td><td>Canvas preview PNG</td></tr><tr><td><code>/canvas/region</code></td><td>GET</td><td>Region PNG (?x,y,w,h)</td></tr><tr><td><code>/canvas/tile/{z}/{x}/{y}</code></td><td>GET</td><td>Map tile PNG</td></tr><tr><td><code>/pixel/{x}/{y}</code></td><td>GET</td><td>Pixel info &amp; history</td></tr><tr><td><code>/recent</code></td><td>GET</td><td>Recent pixel changes</td></tr></tbody></table><h2 id="protocol" tabindex="-1">Protocol <a class="header-anchor" href="#protocol" aria-label="Permalink to &quot;Protocol&quot;">​</a></h2><p>Anchor Canvas uses <strong>State messages (Kind 2)</strong> from the Anchor protocol.</p><h3 id="pixel-format" tabindex="-1">Pixel Format <a class="header-anchor" href="#pixel-format" aria-label="Permalink to &quot;Pixel Format&quot;">​</a></h3><p>Each pixel is encoded in 7 bytes:</p><table tabindex="0"><thead><tr><th>Field</th><th>Size</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>X</td><td>2 bytes</td><td>u16 BE</td><td>X coordinate (0-4579)</td></tr><tr><td>Y</td><td>2 bytes</td><td>u16 BE</td><td>Y coordinate (0-4579)</td></tr><tr><td>R</td><td>1 byte</td><td>u8</td><td>Red (0-255)</td></tr><tr><td>G</td><td>1 byte</td><td>u8</td><td>Green (0-255)</td></tr><tr><td>B</td><td>1 byte</td><td>u8</td><td>Blue (0-255)</td></tr></tbody></table><h3 id="payload-format" tabindex="-1">Payload Format <a class="header-anchor" href="#payload-format" aria-label="Permalink to &quot;Payload Format&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[num_pixels: u32 BE][pixel_0][pixel_1]...[pixel_n]</span></span></code></pre></div><h3 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h3><p>Red pixel at coordinates (100, 200):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>00000001 0064 00C8 FF 00 00</span></span>
<span class="line"><span>│        │    │    │  │  └── B: 0</span></span>
<span class="line"><span>│        │    │    │  └───── G: 0</span></span>
<span class="line"><span>│        │    │    └──────── R: 255</span></span>
<span class="line"><span>│        │    └───────────── Y: 200</span></span>
<span class="line"><span>│        └────────────────── X: 100</span></span>
<span class="line"><span>└─────────────────────────── Count: 1</span></span></code></pre></div><p>For complete protocol details, see <a href="/kinds/state.html">State Kind (Kind 2)</a>.</p><h2 id="development" tabindex="-1">Development <a class="header-anchor" href="#development" aria-label="Permalink to &quot;Development&quot;">​</a></h2><h3 id="backend-rust" tabindex="-1">Backend (Rust) <a class="header-anchor" href="#backend-rust" aria-label="Permalink to &quot;Backend (Rust)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/anchor-canvas/backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cargo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cargo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span></span></code></pre></div><h3 id="frontend-next-js" tabindex="-1">Frontend (Next.js) <a class="header-anchor" href="#frontend-next-js" aria-label="Permalink to &quot;Frontend (Next.js)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/anchor-canvas/frontend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">​</a></h2><ul><li><a href="/kinds/state.html">State Kind (Kind 2)</a> - Protocol specification</li><li><a href="/protocol/carriers.html">Carrier Types</a> - OP_RETURN, Witness Data, Inscription</li><li><a href="/sdk/api-reference.html">SDK API Reference</a> - SDK implementation details</li></ul>`,34)])])}const u=t(i,[["render",d]]);export{k as __pageData,u as default};
