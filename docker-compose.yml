# =============================================
# ANCHOR PROTOCOL - DOCKER COMPOSE
# =============================================
#
# This file uses Docker Compose's include directive to organize
# services into logical groups for easier maintenance.
#
# Structure:
#   docker/compose.core.yml        - Bitcoin, PostgreSQL, Indexer, Wallet, Testnet
#   docker/compose.electrum.yml    - Electrs, Fulcrum
#   docker/compose.explorers.yml   - Mempool, BTC-RPC Explorer, Bitfeed
#   docker/compose.networking.yml  - Tailscale, Cloudflare, Tor
#   docker/compose.monitoring.yml  - Netdata
#   docker/compose.dashboard.yml   - Dashboard Backend/Frontend
#   docker/compose.apps.yml        - All Anchor Apps
#   docker/compose.sites.yml       - Docs, Landing Pages
#
# Usage:
#   docker compose --profile minimum up -d    # Core + Dashboard only (for initial setup)
#   docker compose --profile default up -d    # Core + Dashboard + All Apps + Networking
#   docker compose --profile full up -d       # Everything including explorers
#   docker compose --profile app-threads up -d # Specific app only
#
# =============================================

include:
  - docker/compose.core.yml
  - docker/compose.electrum.yml
  - docker/compose.explorers.yml
  - docker/compose.networking.yml
  - docker/compose.monitoring.yml
  - docker/compose.dashboard.yml
  - docker/compose.apps.yml
  - docker/compose.sites.yml

# =============================================
# SHARED VOLUMES
# =============================================
volumes:
  # Core
  bitcoin-data:
  postgres-data:
  wallet-data:
  
  # Electrum
  electrs-data:
  fulcrum-data:
  
  # Explorers
  mempool-db-data:
  
  # Networking
  tailscale-data:
  tor-data:
  
  # Monitoring
  netdata-config:
  netdata-lib:
  netdata-cache:
  
  # Apps
  oracles-postgres-data:
  lottery-postgres-data:
  backup-data:

# =============================================
# SHARED NETWORK
# =============================================
networks:
  anchor-network:
    driver: bridge
